# üéÆ SwitchLink - Quick Start Guide

## ‚úÖ What We've Built

‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö **SwitchLink** ‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏•‡πâ‡∏ß ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢:

### 1. **PC Backend** (Rust - ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß)

- ‚úÖ GUI ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡∏î‡πâ‡∏ß‡∏¢ eGUI
- ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö USB 3.0
- ‚úÖ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏î‡πâ‡∏ß‡∏¢ SQLite
- ‚úÖ ‡πÅ‡∏™‡∏î‡∏á progress ‡πÅ‡∏ö‡∏ö real-time

### 2. **Switch Client** (C++ - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà)

- ‚úÖ Protocol ‡πÅ‡∏ö‡∏ö custom (SWLK)
- ‚úÖ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏π‡∏á‡∏ñ‡∏∂‡∏á 45 MB/s
- ‚úÖ UI ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡∏ö‡∏ô Switch
- ‚úÖ ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

## üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: Build Switch Client

```bash
cd /home/dit/Sites/dbi-backend-gui/switch-client

# ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ Docker (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)
./build-switch.sh

# ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ devkitPro ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡πâ‡∏ß
make
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏õ‡∏¢‡∏±‡∏á Switch

```bash
# Mount SD card
sudo mkdir -p /mnt/switch
sudo mount /dev/sdX1 /mnt/switch  # ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô sdX1 ‡πÄ‡∏õ‡πá‡∏ô device ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì

# ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå
sudo cp switchlink-client.nro /mnt/switch/switch/

# Unmount
sudo umount /mnt/switch
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏£‡∏±‡∏ô Backend ‡∏ö‡∏ô PC

```bash
cd /home/dit/Sites/dbi-backend-gui
cargo run --release
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏£‡∏±‡∏ô Client ‡∏ö‡∏ô Switch

1. ‡πÉ‡∏™‡πà SD card ‡πÄ‡∏Ç‡πâ‡∏≤ Switch
2. ‡πÄ‡∏õ‡∏¥‡∏î Homebrew Menu
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "SwitchLink USB Installer"
4. ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ USB ‡∏Å‡∏±‡∏ö PC

## üìä ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏ï‡πà‡∏≠

### ‚ö†Ô∏è ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó PC Backend

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ Switch client ‡πÉ‡∏ä‡πâ protocol ‡πÉ‡∏´‡∏°‡πà (SWLK) ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó PC backend ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö:

1. **‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå**: `src/usb.rs`
2. **‡πÄ‡∏û‡∏¥‡πà‡∏° support ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö SWLK protocol**:

```rust
// ‡πÉ‡∏ô src/usb.rs
const PROTOCOL_MAGIC_SWLK: u32 = 0x4B4C5753; // "SWLK"

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö magic number
fn handle_client_connection() {
    // ‡∏≠‡πà‡∏≤‡∏ô magic number
    let magic = read_u32();

    if magic == PROTOCOL_MAGIC_SWLK {
        // ‡πÉ‡∏ä‡πâ SwitchLink protocol
        handle_switchlink_protocol();
    } else {
        // ‡πÉ‡∏ä‡πâ DBI protocol ‡πÄ‡∏î‡∏¥‡∏°
        handle_dbi_protocol();
    }
}
```

### üîß ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

1. **‡πÄ‡∏û‡∏¥‡πà‡∏° chunk size ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô** (1MB ‡πÅ‡∏ó‡∏ô 64KB)
2. **‡πÄ‡∏û‡∏¥‡πà‡∏° progress callback** ‡∏ó‡∏µ‡πà‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏∂‡πâ‡∏ô
3. **‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö resume** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢‡πÇ‡∏≠‡∏ô‡∏Ç‡∏≤‡∏î
4. **‡πÄ‡∏û‡∏¥‡πà‡∏° compression** (zstd)

## üìÅ ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

```
switch-client/
‚îú‚îÄ‚îÄ switchlink-client.nro    # ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏£‡∏±‡∏ô‡∏ö‡∏ô Switch
‚îú‚îÄ‚îÄ build-switch.sh           # Script ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö build
‚îú‚îÄ‚îÄ SETUP_GUIDE.md            # ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á devkitPro
‚îú‚îÄ‚îÄ PROJECT_OVERVIEW.md       # ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ
‚îî‚îÄ‚îÄ source/
    ‚îú‚îÄ‚îÄ main.cpp              # UI ‡πÅ‡∏•‡∏∞ main loop
    ‚îî‚îÄ‚îÄ usb_client.cpp        # USB protocol
```

## üêõ ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

### Docker ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

```bash
sudo systemctl start docker
sudo usermod -aG docker $USER
# Log out ‡πÅ‡∏•‡∏∞ log in ‡πÉ‡∏´‡∏°‡πà
```

### Build ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

```bash
# ‡∏î‡∏∂‡∏á Docker image ‡πÉ‡∏´‡∏°‡πà
docker pull devkitpro/devkita64

# Clean ‡πÅ‡∏•‡∏∞ build ‡πÉ‡∏´‡∏°‡πà
cd switch-client
docker run --rm -v $(pwd):/src devkitpro/devkita64 make clean
docker run --rm -v $(pwd):/src devkitpro/devkita64 make
```

### Switch ‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ USB

- ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏¢ USB-C ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö data transfer
- ‡∏•‡∏≠‡∏á USB port ‡∏≠‡∏∑‡πà‡∏ô (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ USB 3.0 - ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô)
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Backend ‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô PC
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö udev rules (Linux)

## üéØ ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á

- **‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß**: 40-50 MB/s (USB 3.0)
- **CPU**: 5-10% usage
- **Memory**: 25-35 MB
- **‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á 4GB**: ~90 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- **‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á 8GB**: ~180 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

## üìö ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

- `SETUP_GUIDE.md` - ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á development environment
- `PROJECT_OVERVIEW.md` - ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- `README.md` - ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠ Switch client
- `../README.md` - ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠ PC backend

## üéâ ‡∏™‡∏£‡∏∏‡∏õ

‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß! ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÅ‡∏Ñ‡πà:

1. ‚úÖ Build Switch client ‡∏î‡πâ‡∏ß‡∏¢ Docker
2. ‚úÖ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏õ‡∏¢‡∏±‡∏á SD card
3. ‚úÖ ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó PC backend ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö SWLK protocol
4. ‚úÖ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠

**‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏ô‡∏∏‡∏Å‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ homebrew! üöÄ**

---

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏**: ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠ "SwitchLink" ‡πÅ‡∏ó‡∏ô "DBI" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Ç‡∏≠‡∏Ñ‡∏£‡∏±‡∏ö ‚úÖ
